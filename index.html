<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-97868CE3Z6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-97868CE3Z6');
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tracking Analysis for Physics</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <img src="Pl.png" alt="Logo" class="logo"/>
    <h1>Tracking Analysis for Physics</h1>
    <img id="pel-logo" src="pel-logo.png" alt="Physics Exam Lab">
  </header>
  <main>
    <input type="file" id="video-upload" accept="video/*" />
    <div id="fps-display" style="font-size: 0.9em; margin: 5px 0 10px 10px; color: #333;"></div>
    <div class="controls">
      <label for="object-select">物体番号:</label>
      <input type="number" id="object-select" min="1" value="1" />
      <button id="set-origin">原点を設定</button>
      <button id="set-scale">スケールを設定</button>
      <button id="export-csv">CSV出力</button>
      <label for="custom-step">進むフレーム数 N を指定したい場合 →</label>
      <input type="number" id="custom-step" min="1" value="8" style="width: 60px;"/>
    </div>

    <div class="frame-controls">
  <button id="custom-back">←N</button>
  <button id="back10">←10</button>
  <button id="back8">←8</button>
  <button id="back5">←5</button>
  <button id="back1">←1</button>
  <input type="range" id="frame-slider" min="0" max="1000" value="0" />
<button id="forward1">1→</button>
      <button id="forward5">5→</button>
      <button id="forward8">8→</button>
      <button id="forward10">10→</button>
  <button id="custom-forward">N→</button></div>

    <div class="video-container">
      <video id="video"  preload="auto"></video>
      <canvas id="canvas"></canvas>
    </div>
    
    <div class="instructions" style="margin: 20px 10px; font-size: 14px; background-color: #f9f9f9; border: 1px solid #ccc; padding: 10px;">
      <strong>操作説明:</strong><br>
      ①「ファイルを選択」で動画を読み込み、動画ファイルの fps を確認（必要なら入力）<br>
      ②「物体番号」の指定により複数物体の追跡が可能<br>
      ③「原点設定」と「スケール設定」を画面内で行う<br>
      ④トラッキングを行い、CSVとして出力<br>
      　→ トラッキングして1フレーム進む：Shift＋クリック<br>
      　→ トラッキングして指定した値のフレーム進む：Ctrl（またはCmd）＋クリック
    </div>
    
  </main>
  <script src="main.js"></script>
  <div style="position:absolute; top:10px; right:10px; font-size:0.9em; color:#ccc;">Design: ODA Tomohiro</div>
</body>
</html>
